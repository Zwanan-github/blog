!!! warning

当一个资源访问量过大，且伴随着频繁更新数据库的情况下，对系统的正常响应是会有影响的，那么我们引入 `Redis` 来减少对数据的直接冲击。

!!!

## 模拟背景

一个社交系统的帖子的访问（大量的重复查询），会增加访问量（大量的修改数据库）。

## 拆分任务

把任务分为访问帖子数据和更新访问量

### 访问帖子数据

获取数据之前，先从速度更快的 `Redis` 里面获取，如果获取不到再从数据库里获取，并将获取到的数据拿来放入 `Redis` 中以优化后面的查询效率。

### 更新访问量

访问量的更新之前，先查询 `Redis` 是否还存在这个帖子的增量记录，如果有就直接对原有的增量进行递增，没有就添加一个增量。再设置一个定时任务来批量把 `Redis` 中的访问量增量更新到 `Mysql` 中。

## 流程图

![2025-6-15-0001.png](/public/images/2025-6-15-0001.png)
